"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const through = require("through2");
function filter(doc, enc, callback) {
    return isDraft(doc) ? callback() : callback(null, doc);
}
function isDraftId(id) {
    return id.startsWith('drafts.');
}
exports.isDraftId = isDraftId;
function isDraft(doc) {
    return doc && doc._id && isDraftId(doc._id);
}
exports.isDraft = isDraft;
exports.prefixId = (id) => (id.startsWith('drafts.') ? id : `drafts.${id}`);
exports.unprefixId = (id) => id.replace(/^drafts\./, '');
exports.removeDrafts = () => through.obj(filter);
exports.extractDrafts = (target) => through.obj((doc, enc, callback) => {
    if (!isDraft(doc)) {
        return callback(null, doc);
    }
    target.push(doc);
    callback();
});
//# sourceMappingURL=handleDrafts.js.map