"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var through = require("through2");
function filter(doc, enc, callback) {
    return isDraft(doc) ? callback() : callback(null, doc);
}
function isDraftId(id) {
    return id.startsWith('drafts.');
}
exports.isDraftId = isDraftId;
function isDraft(doc) {
    return doc && doc._id && isDraftId(doc._id);
}
exports.isDraft = isDraft;
exports.prefixId = function (id) { return (id.startsWith('drafts.') ? id : "drafts." + id); };
exports.unprefixId = function (id) { return id.replace(/^drafts\./, ''); };
exports.removeDrafts = function () { return through.obj(filter); };
exports.extractDrafts = function (target) {
    return through.obj(function (doc, enc, callback) {
        if (!isDraft(doc)) {
            return callback(null, doc);
        }
        target.push(doc);
        callback();
    });
};
//# sourceMappingURL=handleDrafts.js.map